$def with (matkat, params, t, dt)

DEBUG
<strong>$t s</strong>
$for k, v in params.iteritems():
  $k=<strong>$v</strong>
dt=<strong>$dt</strong>

<div class="container-fluid">
<div class="row-fluid">
<div class="span3" style="background-color:purple;"></div>
<div class="span9">

<div id="option">
    <input type="button" value="lähtö" onclick="sortByDt1()"/>
    <input type="button" value="saapuminen" onclick="sortByDt2()"/>
    <input type="button" value="kesto" onclick="sortByDuration()"/>
    <input type="button" value="hinta" onclick="sortByPrice()"/>
    <input type="button" value="vaihdot" onclick="sortByTransfers()"/>
</div>
<div class="results"></div>
</div> <!-- /.span* -->
</div> <!-- /.container -->
</div> <!-- /.row -->
<script>
var query_date = "$dt";
var data = [

$if "auto" in matkat and not "virhe" in matkat["auto"]:
    $ m = matkat["auto"]
    {"luokka":"auto","lahtoaika":"$m["js_aika"]","tunnit":$m["tunnit"],"kesto":"$m["kesto"]","hinta":$m["hinta"],"vaihdot_lkm":0,"tyyppi":"Auto"},

$code:
    mh_ja_vr = []
    for x in ["juna", "bussi"]:
        if x in matkat and not "virhe" in matkat[x]:
            mh_ja_vr += matkat[x]

$for m in mh_ja_vr:
    {"luokka":"$m["luokka"]","lahtoaika":"$m["js_aika"]","tunnit":$m["tunnit"],"kesto":"$m["kesto"]","hinta":$m["hinta"],"vaihdot_lkm":$m["vaihdot_lkm"],"tyyppi":"$m["tyyppi"]"},

]
</script>
<script src="/static/js/d3.v3.min.js"></script>
<script src="/static/js/d3testi.js"></script>
