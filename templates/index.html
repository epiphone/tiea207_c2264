<div class="container">
<div class="hero-unit">

<h1>Joukkoliikenteen hintavertailu</h1><small>prototyyppi</small>
<form class="form-horizontal" method="GET" action="/haku">
  <input type="hidden" id="inputTyyppi" name="aikatyyppi" value="saapumisaika"/>
  <div class="control-group">
    <label for="inputMista" class="control-label">Mistä</label>
    <div class="controls">
      <input class="input" id="inputMista" type="text" name="mista" autocomplete="off" required autofocus/>
    </div>
  </div>

  <div class="control-group">
    <label for="inputMihin" class="control-label">Mihin</label>
    <div class="controls">
      <input id="inputMihin" type="text" name="mihin" autocomplete="off" required/>
    </div>
  </div>

  <div class="control-group">
    <label for="inputTunnit" class="control-label">Aika ja Pvm</label>
    <div class="controls form-inline">
      <input type="text" class="input-xmini" id="inputTunnit" name="h"/>
      <input type="text" class="input-xmini" id="inputMinuutit" name="min"/>
      <input type="text" class="input-small" id="inputPvm" name="pvm"/>

      <div class="btn-group">
        <button id="btnAikatyyppi" class="btn dropdown-toggle" data-toggle="dropdown">Saapumisaika<span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
          <li><a id="aAikatyyppi">Lähtöaika</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="control-group">
    <div class="controls">
      <label class="checkbox inline">
        <input type="checkbox" name="juna" checked> Juna
      </label>
      <label class="checkbox inline">
        <input type="checkbox" name="bussi" checked> Bussi
      </label>
      <label class="checkbox inline">
        <input type="checkbox" name="auto" checked> Auto
      </label>
    </div>
  </div>

  <div class="control group">
    <div class="controls">
      <button class="btn btn-primary" type="submit">Hae yhteyksiä</button>
    </div>
  </div>
</form>

</div> <!-- /.hero-unit -->
</div> <!-- /.container -->

<script src="static/js/paikannimet.js"></script>
<script>
window.onload = function() {
  // Asetetaan oletuslähtöaika ja lähtöpvm
  var dt = new Date();
  $$("#inputPvm").val([dt.getDate(), dt.getMonth() + 1, dt.getFullYear()].join("."));
  $$("#inputTunnit").val(dt.getHours() + 1);
  $$("#inputMinuutit").val(dt.getMinutes());

  // Lähtöaika/Saapumisaika-valitsin
  $$("#aAikatyyppi").click(function() {
    var btn = $$("#btnAikatyyppi")[0],
        vanhaTyyppi = $$(btn).text().trim(),
        uusiTyyppi = $$(this).text().trim();
    $$(this).text(vanhaTyyppi);
    $$(btn).text(uusiTyyppi);
    if (uusiTyyppi == "Lähtöaika") {
      $$("#inputTyyppi").val("lahtoaika");
    } else {
      $$("#inputTyyppi").val("saapumisaika");
    }
  })

  $$("#inputTyyppi").val("saapumisaika"); // Asetetaan oletusarvo

  // Datepicker
  var dpSettings = {
    dateFormat: "dd.mm.yy",
    dayNamesMin: ["Ma","Ti","Ke","To","Pe","La","Su"],
    monthNames: ["Tammi","Helmi","Maalis","Huhti","Touko","Kesä", "Heinä","Elo","Syys","Loka","Marras","Joulu"],
    defaultDate: null
  };
  $$("#inputPvm").datepicker(dpSettings);

  // Autocomplete
  $$("input[name='mista'],input[name='mihin']").typeahead({source: paikat});
}
</script>
